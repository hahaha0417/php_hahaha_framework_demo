<?php
// Kerox\Messenger出e，卡在getCallbackEvents()所以Q用BotMan

// @不需要打包理，作@楣例，直接使用BotMan即可

composer require botman/botman
composer require botman/driver-facebook

// require_once HAHAHALIB . '\composite\facebook\facebook.php';
require_once HAHAHALIB . '\composite\facebook\messenger\facebook_messenger.php';
//
use BotMan\BotMan\BotMan;
use BotMan\Drivers\Facebook\Extensions\ButtonTemplate;
use BotMan\Drivers\Facebook\Extensions\ElementButton;
// 要找到使用的namespace

$facebook_messenger_ = new \hahahalib\facebook_messenger(
	'17c1813d6225957e7c18646a4362ae8b',			
	'EAADjHqxJo3wBAJLbedKG9wkRD2HGVL5LdNQy4ULgyf2h77hs9yKU27NMt56zmPYNSUFUu71QybRjkUjEChQpqF3DFMZBbDfTG5n9vGub0ZAVdMaTXpjyOYBob1312gKA9awOZC5tcjbWtxvnXdU0dHQNdfnZB6A6FSWHewwVcQZDZD',
	'hahaha'
);

$facebook_messenger_->Facebook_Messenger_->hears('hello', function(BotMan $bot)
{
	$bot->reply("hello");
	
});

//y的要加入_l者
// https://stackoverflow.com/questions/36803570/facebook-messenger-webhook-setup-but-not-triggered	
// 出e太多卡住，似乎要等到全部e的跑完才恢驼常，可以取消 or 重facebook app or 重aapche
// 目前]找到正_理方法
// https://github.com/botman/botman
// https://botman.io/2.0/installation
$facebook_messenger_->Facebook_Messenger_->hears('button', function(BotMan $bot)
{
	$bot->reply(ButtonTemplate::create('Do you want to know more about BotMan?')
		->addButton(ElementButton::create('Tell me more')
			->type('postback')
			->payload('tellmemore')
		)
		->addButton(ElementButton::create('Show me the docs')
			->url('http://botman.io/')
		)
	);
	
});
	
$facebook_messenger_->Facebook_Messenger_->listen();